

# ---------------------------------------------------
# アニメーションパラメータ
# ---------------------------------------------------
class AniParam
  
  
  # -----------------------------------------------
  # コンストラクタ
  # -----------------------------------------------
  constructor: ->
    
    @x = 0;
    @y = 0;
    
    @tx = 0;
    @ty = 0;
    
    @_tEase  = 0.15;
    @tEaseE = 0.15;
    @ease = 0.15;
    
    @_cnt = 0;
    @_delay = 0;
  
  
  
  # -----------------------------------------------
  # イージング値のリセット
  # -----------------------------------------------
  resetE: =>
    
    @ease = 0;
    
    return @;
  
  
  
  # -----------------------------------------------
  # 遅延設定
  # -----------------------------------------------
  delay: (d) =>
    
    @_delay = d || 0;
    @_cnt = 0;
    
    return @;
  
  
  
  # -----------------------------------------------
  # 現在値を目標値に
  # -----------------------------------------------
  finish: =>
    
    @x = @tx;
    @y = @ty;
    
    return @;
  
  
  
  # -----------------------------------------------
  # 目標値に達してるかどうか
  # -----------------------------------------------
  isFinish: =>
    
    if @_cnt >= @_delay && Math.abs(@tx - @x) < 0.5 && Math.abs(@ty - @y) < 0.5
      return true;
    else
      return false;
  
  
  
  # -----------------------------------------------
  # 更新
  # -----------------------------------------------
  update: =>
    
    if @_cnt++ >= @_delay
      @ease += (@_tEase - @ease) * @tEaseE;
      @x += (@tx - @x) * @ease;
      @y += (@ty - @y) * @ease;
      
      if Math.abs(@tx - @x) < 0.5
        @x = @tx;
      
      if Math.abs(@ty - @y) < 0.5
        @y = @ty;





module.exports = AniParam;